                                                 ПРАКТИЧНА РОБОТА №8
          	                       на тему: « Використання представлень (VIEW).»
                                 
Мета роботи: Ознайомитися з видами обмежень цілісності, що застосовуються в реляційних базах даних, та реалізувати їх за допомогою декларативного та процедурного підходів, з урахуванням часу перевірки та області дії.

                                             Варіант №20 (ДАІ)
База даних повинна містити інформацію про дорожньо-транспортні
подіях (ДТП). Про ДТП має бути відомо вид ДТП, які транспортні засоби в ньому брали участь (можливо більше двох), їх державні номери, П.І.Б., домашні адреси водіїв цих транспортних засобів, а також номери посвідчень водія. Крімтого, необхідно знати кількість постраждалих у даній ДТП, вид травми, П.І.Б., домашня адреса та номер паспорта кожного потерпілого. Постраждалими можуть бути водії. У ДТП можуть брати участь і пішоходи, про які потрібно знати, чи не є вони постраждалими, а також їх П.І.Б., домашню адресу та номер паспорта. Про ДТП також мають бути відомі місце, дата, час, винуватець ДТП та які міліціонери (їх звання та П.І.Б.) виїжджали ДТП.
                          
                                Запити
        •	Вивести повний список ДТП, які виникли з вини пішоходів, за вказаний
        період з повними відомостями про них;
        •	Знайти місце, де сталася максимальна кількість ДТП;
        •	Вивести повний список ДТП, на які ВИЇжджали міліціонери із зазначеним
        званням за вказаний період часу, з повними відомостями про ДТП;
        •	Скласти список водіїв, які брали участь більше НІЖ В ОДНІЙ ДТП за
        зазначений період часу, З повними відомостями про цих водіїв;
        •	Скласти список постраждалих у ДТП за вказаний період часу з
        повними відомостями про ці ДТП, упорядковані за кількістю травм певного виду.
        •	Внести відомості про нову ДТП;
        •	Видалити відомості про ДТП, які сталися раніше вказаної дати.

                            
                        Логічна та фізична модель
![image](https://github.com/user-attachments/assets/f28b2ca6-c263-4cf1-8a6b-23382d8fbcb9)

![image](https://github.com/user-attachments/assets/96d46b57-0b9a-4983-97ca-c6d99bad622c)


Завдання 2. 
VIEW у базі даних — це віртуальна таблиця, яка не зберігає дані самостійно, а формує їх на основі результату запиту до однієї чи кількох реальних таблиць. Вигляд (VIEW) можна уявити як збережений запит, який щоразу виконується, коли до нього звертаються. Він дозволяє спростити доступ до даних, приховати складність запитів або обмежити доступ до певних стовпців чи рядків у таблицях. Наприклад, якщо в таблиці зберігається багато даних, але потрібно показувати лише кілька стовпців — можна створити VIEW, який міститиме тільки необхідну інформацію.


Приклад використання VIEW для бази даних (Варіант №20: ДАІ)
--Вивести повний список ДТП, які виникли з вини пішоходів за вказаний період із повними відомостями.:
CREATE VIEW Pedestrian_Caused_Accidents AS
SELECT 
    A.ID_Accident,
    A.Date,
    A.Time,
    A.Location,
    A.Accident_Type,
    A.Victim_Count,
    P.LastName AS Pedestrian_LastName,
    P.FirstName AS Pedestrian_FirstName,
    P.MiddleName AS Pedestrian_MiddleName,
    P.Address AS Pedestrian_Address,
    P.Passport_Number AS Pedestrian_Passport,
    C.ID_Culprit
FROM 
    Accident A
JOIN 
    Culprit C ON A.ID_Accident = C.ID_Accident AND C.Type = 'Pedestrian'
JOIN 
    Pedestrian P ON C.ID_Related = P.ID_Pedestrian

Приклад використання VIEW у запиті:
	SELECT *
FROM Pedestrian_Caused_Accidents
WHERE Date BETWEEN '2024-01-01' AND '2024-12-31'

Пояснення коду:
У цьому фрагменті SQL-коду створюється уявлення (view) з назвою Pedestrian_Caused_Accidents, яке призначене для зберігання повного списку дорожньо-транспортних пригод, що сталися з вини пішоходів. Це уявлення дозволяє зручно й багаторазово використовувати складний запит без необхідності щоразу писати багато JOIN-операцій.
У SELECT-запиті вказано вибір даних з трьох таблиць: Accident, Culprit та Pedestrian. З таблиці Accident вибираються основні характеристики пригоди: ідентифікатор, дата, час, місце події, тип аварії та кількість постраждалих. Далі йде об’єднання (JOIN) з таблицею Culprit, де вказується, що потрібно враховувати лише ті випадки, де винуватцем є пішохід, тобто C.Type = 'Pedestrian'. Зв’язок між ДТП і винуватцем здійснюється через поле ID_Accident.
Після цього відбувається з’єднання таблиці Culprit з таблицею Pedestrian, щоб отримати повну інформацію про особу, яка є пішоходом і винуватцем аварії. Для цього використовується зв’язок за ідентифікатором пішохода: C.ID_Related = P.ID_Pedestrian.
У результаті створюється уявлення, яке містить усю необхідну інформацію про ДТП, спричинені пішоходами: дату, час, місце події, тип пригоди, кількість постраждалих, а також повні особисті відомості про пішохода (прізвище, ім’я, по батькові, адреса, номер паспорта).
Після створення уявлення його можна легко використовувати в подальших запитах. Наприклад, у поданому запиті з цього view вибираються всі записи про ДТП, які сталися протягом 2024 року. Завдяки використанню view цей запит виглядає просто та зрозуміло, не містить складної логіки з’єднання таблиць і дозволяє зосередитися лише на умовах відбору даних.
 
 

Завдання 3. Просте представлення
У даному завданні потрібно створити просте представлення (view) у мові SQL. Представлення — це віртуальна таблиця, що базується на результаті виконання SQL-запиту. Воно використовується для спрощення доступу до певних даних, приховування складності запитів або обмеження доступу до чутливої інформації. У прикладі розглядається створення представлення vCustomerNames, яке відображає лише ідентифікатори клієнтів (CustomerID) та їхні імена (FirstName, LastName) з таблиці Customers.

Лістинг коду:
--3 Представлення для виводу імен водіїв
CREATE VIEW vDriverNames AS
SELECT ID_Driver, FirstName, MiddleName, LastName
FROM Driver;
		Пояснення коду:
Цей SQL-запит створює уявне представлення (view), яке називається vDriverNames. Представлення не зберігає дані окремо, а є віртуальною таблицею, яка формується на основі вказаного запиту. У цьому випадку представлення вибирає з таблиці Driver чотири стовпці: унікальний ідентифікатор водія (ID_Driver), ім’я (FirstName), по батькові (MiddleName) та прізвище (LastName). Таким чином, це представлення дозволяє зручно переглядати особисті дані водіїв без доступу до решти інформації з таблиці Driver.
 


Завдання 4. Використання представлення
У цьому завданні розглядається використання створеного раніше представлення (view) для спрощення вибірки необхідних даних. Представлення у SQL дозволяють створювати віртуальні таблиці, які зберігають результати запиту, що можна повторно використовувати для зручності та кращої читабельності коду. Це особливо корисно у великих базах даних, де для доступу до потрібної інформації необхідно виконувати складні запити.

Лістинг коду:
--4 Вибір імен водіїв з представлення
SELECT FirstName, MiddleName, LastName FROM vDriverNames;

Пояснення до коду :
Для мого варіанта — бази даних дорожньо-транспортних пригод (варіант №20), я раніше створила представлення vDriverNames, яке містить ідентифікатори водіїв та їхні імена. Тепер я використаю це представлення для вибірки імен усіх водіїв. Цей запит дозволяє отримати список імен водіїв, які містяться у базі даних, без необхідності безпосередньо звертатися до таблиці Driver. Такий підхід забезпечує зручніший та безпечніший доступ до даних і може бути використаний у звітах або інтерфейсах користувача.
 


Завдання 5. Представлення з фільтром
У цьому завданні розглядається створення представлення (view), яке дозволяє відфільтрувати лише ті записи з великої таблиці, які відповідають певному критерію. Це зручно для спрощення доступу до потрібних даних без зміни структури або змісту бази.
У прикладі, наведеному в завданні, створено представлення vUSACustomers, що показує лише клієнтів із США.

Лістинг коду:

--5 представлення vInjuredDrivers, яке показує усіх постраждалих водіїв (ті, хто є як у таблиці Victim, так і в таблиці Driver_Involvement).
CREATE VIEW vInjuredDrivers AS
SELECT
    D.ID_Driver,
    D.LastName,
    D.FirstName,
    D.MiddleName,
    D.Address,
    D.License_Number,
    A.ID_Accident,
    A.Date,
    A.Location,
    V.Injury_Type,
    V.Severity
FROM Driver D
JOIN Driver_Involvement DI ON D.ID_Driver = DI.ID_Driver
JOIN Accident A ON DI.ID_Accident = A.ID_Accident
JOIN Victim V ON A.ID_Accident = V.ID_Accident
WHERE V.Passport_Number IN (
    SELECT Passport_Number FROM Victim
    INTERSECT
    SELECT Passport_Number FROM (
        SELECT Passport_Number, Address
        FROM Driver
    ) AS DriverPassports
);

Пояснення коду:
Представлення vInjuredDrivers створене для відображення інформації про водіїв, які брали участь у ДТП і водночас є постраждалими в цих ДТП. Воно об’єднує дані з таблиць водіїв, участі водіїв у ДТП, самих ДТП та постраждалих. В результаті формує список з детальними даними про водіїв — їхні ідентифікатори, ПІБ, адресу, номер водійського посвідчення, а також інформацію про конкретну ДТП, дату, місце і характер травм. Фільтрація здійснюється таким чином, щоб показувати лише тих постраждалих, які мають паспортний номер, що співпадає з паспортним номером водія, тобто враховуються лише водії, які були травмовані в ДТП. Це дозволяє виділити саме ту частину постраждалих, які є водіями, а не іншими учасниками.
 
 

Завдання 6. Оновлення представлення.
У цьому завданні я реалізувала оновлення поля у представленні (VIEW) на прикладі моєї бази даних, яка містить інформацію про дорожньо-транспортні пригоди (ДТП). Мета полягала в тому, щоб через представлення оновити дані в базовій таблиці і переконатися, що внесені зміни коректно зберігаються. Оновлення даних через представлення є зручним способом роботи з інформацією, проте не всі представлення підтримують таку функцію напряму.
Лістинг коду:
--6 представлення vDrivers
CREATE VIEW vDrivers AS
SELECT
    ID_Driver,
    LastName,
    FirstName,
    MiddleName,
    Address,
    License_Number
FROM Driver;

--Приклад оновлення даних через представлення:
UPDATE vDrivers
SET Address = '10 Shevchenko St'
WHERE ID_Driver = 1;
Пояснення коду:
Я створила представлення vDrivers, яке відображає основні дані про водіїв з таблиці Driver: їх ідентифікатор, П.І.Б., адресу та номер посвідчення водія. Оскільки представлення сформоване без складних об’єднань і містить лише одну таблицю, воно є оновлюваним. Далі я виконала оновлення поля Address для конкретного водія за його ID, використовуючи оператор UPDATE безпосередньо над цим представленням. Після виконання запиту зміни успішно відобразилися у таблиці Driver бази даних, що підтверджує коректність операції.




Завдання 7. Представлення з JOIN для варіанта "ДАІ".
У цьому завданні необхідно створити представлення (view), яке поєднує дані з кількох таблиць бази даних, використовуючи операцію JOIN. Таке представлення дозволяє отримати зведену інформацію з пов’язаних таблиць без необхідності щоразу виконувати складний запит. У контексті бази даних ДТП, представлення допоможе швидко дізнатися, в яких аваріях брав участь кожен водій.
Лістинг коду:
--7 Представлення з JOIN для варіанта "ДАІ":
CREATE VIEW DriverAccidents AS
SELECT 
    D.ID_Driver,
    D.LastName,
    D.FirstName,
    D.MiddleName,
    A.ID_Accident,
    A.Date,
    A.Time,
    A.Location,
    A.Accident_Type
FROM Driver D
JOIN Driver_Involvement DI ON D.ID_Driver = DI.ID_Driver
JOIN Accident A ON DI.ID_Accident = A.ID_Accident;

Пояснення до коду :
	CREATE VIEW DriverAccidents AS — створюється нове представлення з назвою DriverAccidents.
	SELECT ... — вибираються потрібні поля з таблиць:
•	з таблиці Driver: ID водія, прізвище, ім’я, по батькові;
•	з таблиці Accident: ID ДТП, дата, час, місце та тип аварії.
	JOIN Driver_Involvement — використовується проміжна таблиця, яка вказує, в яких ДТП брав участь кожен водій.
	JOIN Accident — приєднуються деталі кожної ДТП за її ідентифікатором.

Представлення DriverAccidents надає зручний спосіб переглядати повну інформацію про участь водіїв у ДТП. Воно є корисним для аналізу аварійності, ведення звітності, а також для використання в подальших запитах або звітах без необхідності багаторазового приєднання таблиць вручну.
 



Завдання 8. Представлення з агрегацією (GROUP BY)
У цьому завданні створюю представлення з використанням агрегації (групування). Мета — зібрати статистику про кількість ДТП, у яких був задіяний кожен водій. Це дозволяє швидко оцінити рівень участі конкретного водія в дорожньо-транспортних пригодах, що може бути корисним для страхових компаній, правоохоронних органів або під час проведення службових перевірок.

Лістинг коду:
--8 статистика про кількість ДТП, у яких був задіяний кожен водій.
CREATE VIEW DriverAccidentCounts AS
SELECT 
    D.ID_Driver,
    D.LastName,
    D.FirstName,
    D.MiddleName,
    COUNT(DI.ID_Accident) AS AccidentCount
FROM Driver D
LEFT JOIN Driver_Involvement DI ON D.ID_Driver = DI.ID_Driver
GROUP BY D.ID_Driver, D.LastName, D.FirstName, D.MiddleName;

SELECT * FROM DriverAccidentCounts;



Пояснення коду:
•	CREATE VIEW DriverAccidentCounts AS — створюється представлення DriverAccidentCounts, яке буде містити ID водія, його ПІБ і кількість ДТП.
•	SELECT ... COUNT(...) AS AccidentCount — рахується кількість записів у таблиці участі водіїв у ДТП для кожного водія.
•	LEFT JOIN Driver_Involvement — використовується ліве з'єднання, щоб також включити водіїв, які ще не брали участі в ДТП (тобто нульова кількість).
•	GROUP BY ... — дані групуються за унікальними даними кожного водія (ID, ПІБ), щоб забезпечити правильний підрахунок
Представлення DriverAccidentCounts є ефективним інструментом для аналітики — воно дозволяє побачити загальну кількість ДТП для кожного водія в базі даних. Це зменшує потребу в повторному написанні складних запитів та підвищує продуктивність під час підготовки звітності.

 
 

Завдання 10. Використання представлення в іншому представленні
У цьому завданні потрібно створити представлення, яке базується на іншому вже існуючому представленні. Це дозволяє будувати багаторівневі абстракції даних та виконувати додаткову фільтрацію чи агрегацію.
На прикладі бази даних про ДТП, створюю представлення DriverAccidentCounts, яке показує скільки ДТП було за участю кожного водія. Далі, на основі цього представлення, створюю інше — VIPDrivers — яке міститиме лише тих водіїв, які брали участь у понад 5 ДТП.
Таке представлення допомагає виділити водіїв з високою кількістю ДТП, що може бути корисним для аналітики або контролю.

Лістинг коду:
--10 представлення, яке базується на іншому вже існуючому представленні.

CREATE VIEW DriverAccidentCounts AS
SELECT 
    D.ID_Driver,
    D.LastName,
    D.FirstName,
    D.MiddleName,
    COUNT(DI.ID_Accident) AS AccidentCount
FROM Driver D
LEFT JOIN Driver_Involvement DI ON D.ID_Driver = DI.ID_Driver
GROUP BY D.ID_Driver, D.LastName, D.FirstName, D.MiddleName;

CREATE VIEW VIPDrivers AS
SELECT ID_Driver, LastName, FirstName, MiddleName, AccidentCount
FROM DriverAccidentCounts
WHERE AccidentCount > 5;

Пояснення до коду :
У цьому коді створюються два представлення, одне з яких базується на іншому, що демонструє принцип побудови багатоетапних абстракцій даних у SQL.
1.	DriverAccidentCounts — це представлення, яке об'єднує таблиці Driver та Driver_Involvement і рахує кількість ДТП, у яких брав участь кожен водій.
o	Використовується LEFT JOIN, щоб включити всіх водіїв, навіть тих, хто не мав жодного ДТП (у цьому випадку кількість ДТП буде 0).
o	GROUP BY групує результати за унікальним ідентифікатором водія і його ім’ям, щоб підрахунок (COUNT) був для кожного водія окремо.
o	Результатом є таблиця з інформацією про водія та кількістю ДТП (AccidentCount).
2.	VIPDrivers — це представлення, яке використовує вже створене DriverAccidentCounts для вибору водіїв, які брали участь у більш ніж 5 ДТП.
o	Виконується фільтрація за допомогою умови WHERE AccidentCount > 5.
o	Таким чином, це представлення виділяє «VIP»-водіїв з високим числом ДТП для подальшого аналізу або звітності.


 


Завдання 11. Зміна представлення (ALTER VIEW)
У цьому завданні потрібно змінити існуюче представлення (view), додавши до нього нове поле. Тобто, якщо є представлення, яке об'єднує таблиці Driver, Driver_Involvement і Accident і показує інформацію про водія та ДТП, то потрібно до цього додати поле Address водія, щоб у вибірці була адреса.
Лістинг коду:

--11 Зміна представлення (ALTER VIEW):
ALTER VIEW DriverAccidents AS
SELECT 
    D.ID_Driver,
    D.LastName,
    D.FirstName,
    D.MiddleName,
    D.Address,            -- Додано поле адреси водія
    A.ID_Accident,
    A.Date,
    A.Time,
    A.Location,
    A.Accident_Type
FROM Driver D
JOIN Driver_Involvement DI ON D.ID_Driver = DI.ID_Driver
JOIN Accident A ON DI.ID_Accident = A.ID_Accident;

Пояснення коду:
	ALTER VIEW DriverAccidents AS — команда змінює визначення представлення DriverAccidents.
	У частині SELECT вибираються поля з таблиць:
•	Driver (D) — інформація про водія: ідентифікатор, прізвище, ім’я, по батькові, а також адреса (яку додано).
•	Accident (A) — інформація про ДТП: ідентифікатор, дата, час, місце, тип ДТП.
	З'єднання таблиць відбувається через проміжну таблицю Driver_Involvement (DI), яка зв’язує водіїв з ДТП:
•	Driver з’єднується з Driver_Involvement по ID_Driver.
•	Driver_Involvement з’єднується з Accident по ID_Accident.

Додавання поля адреси водія у представлення дає можливість отримувати повнішу інформацію про водіїв, які брали участь у ДТП, не виконуючи додаткових запитів до бази. Це робить роботу з базою даних зручнішою і ефективнішою.
 



Завдання 12. Команда DROP VIEW використовується для повного видалення існуючого представлення (view) з бази даних.
У завданні 12 необхідно виконати видалення існуючого представлення (VIEW) з бази даних. Представлення — це логічна таблиця, створена на основі одного або кількох запитів, яка може з часом стати непотрібною або потребувати заміни.
Лістинг коду:
--12  Видалення представлення (DROP VIEW)
DROP VIEW VIPDrivers;

Пояснення коду:

Команда DROP VIEW використовується для повного видалення існуючого представлення з бази даних. У наведеному прикладі видаляється представлення VIPDrivers, яке відображало інформацію про водіїв з кількістю дорожньо-транспортних пригод (ДТП), що перевищує певний поріг.
Видалення представлення необхідне, якщо воно більше не потрібне або його слід замінити оновленою версією. Це дозволяє звільнити ресурси бази даних і уникнути плутанини в структурі



Завдання 13. Представлення з псевдонімами стовпців
У завданні 13 необхідно створити представлення (VIEW), яке використовує псевдоніми для стовпців, щоб надати більш зрозумілі та інтуїтивно зрозумілі назви полям у результаті запиту. Представлення — це логічна таблиця, яка спрощує доступ до даних і дозволяє централізовано формувати потрібний вигляд інформації.
Лістинг коду:
-- Завдання 13.
-- Представлення з псевдонімами стовпців: створюємо представлення DriverSummary, яке показує
-- ID водія, повне ім'я водія та номер водійського посвідчення з псевдонімами для деяких полів.

CREATE VIEW DriverSummary AS
SELECT 
    ID_Driver AS DriverID,
    CONCAT(FirstName, ' ', LastName) AS FullName,
    License_Number AS DriverLicenseNumber
FROM Driver;

Пояснення до коду :
У цьому коді створюється представлення DriverSummary, яке містить інформацію про водіїв. Для підвищення зручності використання і читабельності результатів у запиті застосовуються псевдоніми (alias):
•	ID_Driver перейменовано в DriverID — більш коротка та зрозуміла назва ідентифікатора водія.
•	Ім’я та прізвище водія об’єднуються у єдине поле FullName за допомогою функції CONCAT, що робить відображення імені більш зручним.
•	Поле License_Number отримує псевдонім DriverLicenseNumber для кращого пояснення, що це номер посвідчення водія.
Таким чином, представлення DriverSummary забезпечує компактний та інформативний вигляд даних про водіїв, спрощуючи їх подальший аналіз і використання у звітах чи інших запитах.
 


Завдання 14. Представлення з обчислюваним стовпцем.
У цьому завданні необхідно створити представлення, яке містить обчислюваний стовпець. Представлення має показувати повне ім'я водія, номер його посвідчення та кількість днів до закінчення терміну дії посвідчення. Обчислюваний стовпець дозволяє отримувати актуальну інформацію про залишковий термін дії посвідчення в режимі реального часу.
Лістинг коду:
-- Завдання 14.
-- Створення представлення DriverLicenseExpiryWithWarning, яке показує ПІБ водія, номер посвідчення
-- та кількість днів до закінчення терміну дії посвідчення (обчислюваний стовпець).

CREATE VIEW DriverLicenseExpiryWithWarning AS
SELECT 
    CONCAT(FirstName, ' ', LastName) AS FullName,
    License_Number,
    DATEDIFF(DAY, GETDATE(), License_Expiry) AS DaysUntilExpiry
FROM Driver;
Пояснення коду:
Дане представлення містить три колонки: повне ім'я водія (FullName), номер посвідчення (License_Number) та обчислюваний стовпець DaysUntilExpiry, який динамічно визначає кількість днів, що залишились до закінчення терміну дії посвідчення. Для цього використовується функція DATEDIFF, яка рахує різницю в днях між поточною датою (GETDATE()) і датою закінчення посвідчення (License_Expiry). Це допомагає своєчасно відстежувати та контролювати строки дії посвідчень водіїв.
 


Завдання 15. Представлення з WITH CHECK OPTION.
У цьому завданні потрібно створити представлення з обмеженням на вставку або оновлення даних, яке гарантує цілісність фільтрації. Представлення повинно показувати лише записи про дорожньо-транспортні пригоди (ДТП), у яких кількість постраждалих перевищує 2. Для забезпечення того, щоб через це представлення не можна було додати або змінити записи, які не відповідають заданій умові, використовується опція WITH CHECK OPTION.
Лістинг коду:
-- Завдання 15.
-- Створення представлення SeriousAccidents, яке показує ДТП з кількістю постраждалих більше 2,
-- з опцією WITH CHECK OPTION.

CREATE VIEW SeriousAccidents AS
SELECT *
FROM Accident
WHERE Victim_Count > 2
WITH CHECK OPTION;

-- Спроба вставити ДТП з меншою кількістю постраждалих (<=2) призведе до помилки.
INSERT INTO SeriousAccidents (Date, Time, Location, Victim_Count, Accident_Type, Investigation_Status)
VALUES ('2025-05-19', '12:00', 'Вул. Шевченка', 1, 'Зіткнення', 'В процесі');

Пояснення коду:
Представлення SeriousAccidents відображає тільки ті ДТП, у яких кількість постраждалих перевищує 2 (Victim_Count > 2). Опція WITH CHECK OPTION забезпечує, що будь-які операції вставки або оновлення через це представлення не можуть порушувати цю умову.
Якщо спробувати додати запис, де кількість постраждалих менша або дорівнює 2, як у наведеному прикладі вставки, система видасть помилку. Це гарантує цілісність і відповідність даних фільтру, визначеному у представленні, і не дозволяє створювати або змінювати записи, які не відповідають умовам представлення.

   


Вставка викликає помилку, оскільки умова представлення Victim_Count > 2 не виконується. Опція WITH CHECK OPTION не дозволяє додавати або змінювати дані через це представлення, які не відповідають фільтру представлення.

Завдання 16. Представлення з шифруванням (WITH ENCRYPTION).
У цьому завданні необхідно створити представлення, яке містить конфіденційну інформацію про працівників поліції, з додатковим захистом визначення самого представлення. Для цього використовується опція WITH ENCRYPTION, яка шифрує текст запиту представлення, унеможливлюючи його перегляд або зміну іншими користувачами без відповідного ключа. Це дозволяє захистити структуру запиту від несанкціонованого доступу та підвищує безпеку даних.

Лістинг коду:
-- Завдання 16.
-- Створення зашифрованого представлення, яке показує інформацію про міліціонерів.

CREATE VIEW EncryptedPolicemen
WITH ENCRYPTION
AS
SELECT ID_Policeman, LastName, FirstName, Rank, Department
FROM Policeman;
Пояснення до коду :
Опція WITH ENCRYPTION застосовується для шифрування тексту визначення представлення. Вона забороняє перегляд або модифікацію коду представлення через звичайні засоби, що підвищує рівень захисту інформації про структуру запиту. Проте варто пам’ятати, що якщо ключ шифрування буде втрачено або відсутній, відновити або переглянути код представлення буде неможливо. Тому застосування цієї опції вимагає уважного ставлення до збереження ключів і резервних копій.
 



Завдання 17. Представлення для управління доступом. 
У цьому завданні створюється представлення, яке обмежує доступ користувачів до персональних даних водіїв, показуючи лише найнеобхіднішу інформацію — повне ім’я та номер водійського посвідчення. Таким чином реалізується механізм контролю доступу, що дозволяє надавати різним користувачам різний рівень доступу до даних. Для користувача з обмеженими правами ReadOnlyUser надається виключно дозвіл на читання даного представлення, що підвищує захист конфіденційної інформації.

Лістинг коду:
-- Завдання 17.
-- Створення представлення RestrictedDriverInfo, яке показує тільки ПІБ та номер посвідчення водія.

CREATE VIEW RestrictedDriverInfo AS
SELECT CONCAT(FirstName, ' ', LastName) AS FullName, License_Number
FROM Driver;

-- Надання прав користувачу ReadOnlyUser на SELECT до цього представлення
GRANT SELECT ON RestrictedDriverInfo TO ReadOnlyUser;

Пояснення до коду :
Дане представлення надає обмежений вигляд даних про водіїв, що запобігає розкриттю конфіденційної інформації. Надання права SELECT на це представлення користувачу ReadOnlyUser забезпечує йому лише можливість переглядати дані без права їх змінювати або отримувати доступ до інших полів таблиці Driver. Це ефективний спосіб реалізації контролю доступу на рівні бази даних. 



Висновки: 
Під час виконання завдань я ознайомилася з поняттям представлень (VIEW) у базах даних. Представлення — це віртуальні таблиці, які дозволяють відображати та обробляти дані з однієї або кількох таблиць, спрощуючи роботу з базою та підвищуючи безпеку.
Я створювала прості представлення для вибору потрібних полів, фільтрувала дані, наприклад, клієнтів із певної країни, та оновлювала інформацію через представлення. Також робила об’єднання таблиць і групування даних для формування звітів.
Використання псевдонімів і обчислюваних стовпців допомогло зробити результати більш зрозумілими. За допомогою опції WITH CHECK OPTION навчилася обмежувати вставку некоректних даних через представлення. Крім того, розглянула можливість шифрування коду представлень і налаштування прав доступу через представлення.
Ця робота допомогла мені краще зрозуміти, як представлення підвищують ефективність, безпеку та гнучкість роботи з базою даних.


Посилання на конспект:
https://docs.google.com/document/d/1cQ80CNWDVrDLPALv9pUK2ATEX58BABgg/edit?usp=drive_link&ouid=106130475242017779182&rtpof=true&sd=true


